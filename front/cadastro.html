<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MaxFit - Sistema para treinos</title>

    <!-- CSS -->
    <link rel="stylesheet" href="estilos.css">
</head>
<body>
    <!-- CabeÃ§alho -->
    <header>

        <!-- TÃ­tulo -->
        <h1>Max Fit</h1>
        <img src="imagens/logo.png" alt="Logo Max Fit">

        <!-- Menu -->
        <nav>
            <ul>
                <li><a href="index.html">InÃ­cio</a></li>
                <li><a href="sobre.html">Sobre</a></li>
                <li><a href="contato.html">Contato</a></li>
                <li><a href="acesso.html">Acesso</a></li>
            </ul>
        </nav>

    </header>

    <!-- Principal -->
    <main class="cadastro">
       <div class="container">
    <div class="step-indicator">1/2</div>

    <!-- Etapa 1 -->
    <div id="step1">
      <div class="header">
        <img src="imagens/logo.png" alt="Logo MaxFit" width="60">
        <h1>Criar Conta</h1>
      </div>

      <div class="user-type">
        <div class="user-type-option">
          <input type="radio" name="userType" value="aluno" id="aluno">
          <label for="aluno">ðŸŽ¯<br>Aluno</label>
        </div>
        <div class="user-type-option selected">
          <input type="radio" name="userType" value="personal" id="personal" checked>
          <label for="personal">ðŸ’ª<br>Personal Trainer</label>
        </div>
      </div>

      <form id="formCadastro">
        <div class="form-group">
          <input type="text" id="nome" placeholder="Nome completo" required>
        </div>
        <div class="form-group">
          <input type="email" id="email" placeholder="E-mail" required>
        </div>
        <div class="form-group">
          <input type="password" id="senha" placeholder="Senha" required>
        </div>
        <div class="form-group">
          <input type="password" id="confirmarSenha" placeholder="Confirmar senha" required>
        </div>
        <button type="submit" class="btn">Continuar</button>
      </form>

      <a href="entrar.html" class="link">Fazer login</a>
    </div>
  </div>
    </main>

    <!-- Script -->
    <script>
        // js/cadastro.js â€” MaxFit com integraÃ§Ã£o ao banco MySQL
document.addEventListener("DOMContentLoaded", () => {
  const form = document.getElementById("formCadastro");
  const tipoInputs = document.querySelectorAll("input[name='userType']");

  form.addEventListener("submit", async (event) => {
    event.preventDefault();

    const nome = document.getElementById("nome").value.trim();
    const email = document.getElementById("email").value.trim();
    const senha = document.getElementById("senha").value.trim();
    const confirmar = document.getElementById("confirmarSenha").value.trim();
    const tipo = document.querySelector("input[name='userType']:checked")?.value;

    if (!nome || !email || !senha || !confirmar || !tipo) {
      alert("Preencha todos os campos!");
      return;
    }

    if (senha !== confirmar) {
      alert("As senhas nÃ£o coincidem!");
      return;
    }

    try {
      let url = "https://maxfit-v0z3.onrender.com/alunos"

      if(tipo === "personal"){
        url = "https://maxfit-v0z3.onrender.com/personalTrainers"
      }

      const resposta = await fetch(url, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({nome, email, senha}),
      });

      // Salva informaÃ§Ãµes do usuÃ¡rio atual
      let obj = JSON.stringify({nome, tipo});
      localStorage.setItem("usuario", obj);

      // Redireciona direto para o home correspondente
      if (tipo === "personal") {
        window.location.href = "personal.html";
      } else {
        window.location.href = "aluno.html";
      }
    } catch (erro) {
      console.error("Erro no cadastro:", erro);
      alert("Erro ao conectar com o servidor. Tente novamente.");
    }
  });

  // Alterna a seleÃ§Ã£o visual (efeito de botÃ£o selecionado)
  tipoInputs.forEach((input) => {
    input.addEventListener("change", () => {
      document.querySelectorAll(".user-type-option").forEach((opt) => opt.classList.remove("selected"));
      input.parentElement.classList.add("selected");
    });
  });
});

    </script>
</body>
</html>